<style>
  .document-item::after {
    content: 'file';
    content: attr(filetype);
    text-align: right;
    padding: 2px;
    background-color: #536c79;
    color: #fff;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .fa-30 {
    font-size: 30px;
  }

  .file-icon {
    padding: 5px;
    width: 100px;
    height: 110px;
    display: inline-block;
    color: rgba(0, 0, 0, 0.5);
  }

  .text-overflow {
    width: 100%;
    display: inline-block;
    overflow: hidden;
    white-space: pre-wrap;
    height: 25px;
    margin-bottom: 3px;
  }

  table td {
    border: 1px dotted silver;
    word-break: break-all;
  }

  .min-review-type-width {
    min-width: 100px;
  }

  .manuscriptTag {
    position: absolute;
    top: 22px;
    right: 44%;
  }
</style>
<div class="form-group row">
  <div class="col-md-12">
    <div class="list-group">
      <div href="#" class="list-group-item flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
          <h5 class="mb-1"> {{model.newSubmission.title}}</h5>
          <small class="text-muted">{{model.newSubmission.dateSubmitted.date-time}}<br>{{model.newSubmission.dateCreated.date-time}}</small>
        </div>
        <p class="mb-1">{{model.newSubmission.doi}}</p>
        <small class="text-muted">Please review the information below</small>
        <table class="table table-responsive-sm table-bordered w-100">
          <thead>
            <tr>
              <th class="min-review-type-width">Type</th>
              <th>Data</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Journal</td>
              <td>{{get (await model.newSubmission.journal) 'name'}}
              </td>
            </tr>
            <tr>
              <td>Grants</td>
              <td>
                <ul class="list-unstyled">
                  {{#each model.newSubmission.grants as |grant|}}
                    <li><b>{{grant.awardNumber}}</b> : {{grant.projectName}}</li>
                  {{/each}}
                </ul>
              </td>
            </tr>
            <tr>
              <td class="text-nowrap">Repositories</td>
              <td>
                <ul>
                {{#each model.newSubmission.deposits as |deposit|}}
                  <li>{{get (await deposit.repository) 'name'}}</li>
                {{/each}}
              </ul>
              </td>
            </tr>
            <tr>
              <td>Metadata</td>
              <td>
                <ul class="list-unstyled">
                  {{!-- TODO This could probably be done with less loops look back at it --}}
                  {{#each-in model.newSubmission.metadata as |index value|}}
                    <li>
                      <br>
                      <h5 class="font-weight-light"><span class="text-uppercase">{{index}}</span></h5>
                      <hr class="mb-1 mt-1">
                      {{#if (eq index 'ed')}}
                        The Department of Education requires submission through their submission portal. <i>Pass can not submit for you.</i> You can submit to ED at <a href="https://eric.ed.gov/submit/" target="_blank">eric.ed.gov/submit/</a>
                      {{/if}}
                      <ul class="list-unstyled">
                        {{#each-in value.data as |key data|}}
                          <li><b>{{key}}</b>: {{data}}</li>
                        {{/each-in}}
                      </ul>
                    </li>
                  {{/each-in}}
                </ul>
              </td>
            </tr>
            <tr>
              <td>Files</td>
              <td>
                {{#each model.newSubmission.files as |file|}}
                  <div class="card file-icon text-center">
                    {{#if (eq model.newSubmission.files.isManuscript file.file.name)}}
                      <span>
                        <i class="fa fa-star manuscriptTag"></i>
                      </span>
                    {{/if}}
                    <i class="fa fa-file-o fa-30 pt-2"></i>
                    <p class="text-overflow">{{file.file.name}}</p>
                    <span class="document-item" filetype="{{file.type}}"></span>
                  </div>
                {{/each}}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      {{!-- <div class="form-group row bg-gray-100 m-0">
        <label class="col-md-10 col-form-label">I have read and verify that the information for this submission is valid and that the informatin provided is not in violation of any grants.</label>
        <div class="col-md-2 col-form-label">
          <div class="form-check form-check-inline mr-1">
            <input class="form-check-input" type="checkbox" id="userVerify" {{action 'checkValidate' on="change" }}>
            <label class="form-check-label" for="userVerify">yes</label>
          </div>
        </div>
      </div> --}}
      {{#each-in model.newSubmission.metadata as |index value|}}
        {{#if (eq index 'ed')}}
          <div class="form-group row bg-gray-200 m-0">
            <label class="col-md-10 col-form-label">I have submitted my manuscript through the <b>Department of Education (ED)</b> submission portal.</label>
            <div class="col-md-2 col-form-label">
              <div class="form-check form-check-inline mr-1">
                <input class="form-check-input" type="checkbox" id="externalSubmission" {{action 'checkValidate' on="change" }}>
                <label class="form-check-label" for="externalSubmission">yes</label>
              </div>
            </div>
          </div>
        {{/if}}
      {{/each-in}}
    </div>
  </div>
</div>
<button class="btn btn-outline-primary" {{action "back"}}>Back</button>
<button class="btn btn-primary pull-right" {{action "submit"}}>Submit</button>
